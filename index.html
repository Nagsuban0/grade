<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Login & Register</title>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 40px auto; }
  h2 { text-align: center; }
  .form-container { border: 1px solid #ccc; padding: 20px; border-radius: 8px; }
  .tab { display: inline-block; margin: 0 10px; cursor: pointer; font-weight: bold; }
  .tab.active { color: blue; }
  form { display: none; margin-top: 20px; }
  form.active { display: block; }
  label { display: block; margin-top: 10px; }
  input[type=text], input[type=password] {
    width: 100%; padding: 8px; margin-top: 4px; box-sizing: border-box;
  }
  button {
    margin-top: 20px; padding: 10px; width: 100%; background: blue; color: white; border: none; cursor: pointer;
  }
  .message { margin-top: 15px; text-align: center; }
</style>
</head>
<body>

<h2>Login & Register</h2>

<div>
  <span id="tab-login" class="tab active">Login</span>
  <span id="tab-register" class="tab">Register</span>
</div>

<div class="form-container">
  <form id="login-form" class="active">
    <label>Username
      <input type="text" id="login-username" required />
    </label>
    <label>Password
      <input type="password" id="login-password" required />
    </label>
    <button type="submit">Login</button>
  </form>

  <form id="register-form">
    <label>Username
      <input type="text" id="reg-username" required />
    </label>
    <label>Password
      <input type="password" id="reg-password" required />
    </label>
    <label>Full Name
      <input type="text" id="reg-fullname" required />
    </label>
    <label>Student Number
      <input type="text" id="reg-studentnumber" required />
    </label>
    <label>Course
      <input type="text" id="reg-course" required />
    </label>
    <button type="submit">Register</button>
  </form>

  <div class="message" id="message"></div>
</div>

<script>
  const webAppUrl = "PASTE_YOUR_WEB_APP_URL_HERE"; // Replace with your Apps Script Web App URL

  const loginTab = document.getElementById('tab-login');
  const registerTab = document.getElementById('tab-register');
  const loginForm = document.getElementById('login-form');
  const registerForm = document.getElementById('register-form');
  const messageBox = document.getElementById('message');

  loginTab.onclick = () => {
    loginTab.classList.add('active');
    registerTab.classList.remove('active');
    loginForm.classList.add('active');
    registerForm.classList.remove('active');
    messageBox.textContent = "";
  };

  registerTab.onclick = () => {
    registerTab.classList.add('active');
    loginTab.classList.remove('active');
    registerForm.classList.add('active');
    loginForm.classList.remove('active');
    messageBox.textContent = "";
  };

  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    messageBox.textContent = "Logging in...";
    const data = {
      action: "login",
      username: document.getElementById('login-username').value.trim(),
      password: document.getElementById('login-password').value.trim(),
    };
    fetch(webAppUrl, {
      method: "POST",
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(res => res.json())
    .then(resp => {
      messageBox.textContent = resp.message;
      if (resp.status === "success") {
        // Do something on successful login
        messageBox.style.color = "green";
      } else {
        messageBox.style.color = "red";
      }
    })
    .catch(err => {
      messageBox.textContent = "Error connecting to server";
      messageBox.style.color = "red";
    });
  });

  registerForm.addEventListener('submit', e => {
    e.preventDefault();
    messageBox.textContent = "Registering...";
    const data = {
      action: "register",
      username: document.getElementById('reg-username').value.trim(),
      password: document.getElementById('reg-password').value.trim(),
      fullname: document.getElementById('reg-fullname').value.trim(),
      studentnumber: document.getElementById('reg-studentnumber').value.trim(),
      course: document.getElementById('reg-course').value.trim()
    };
    fetch(webAppUrl, {
      method: "POST",
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(res => res.json())
    .then(resp => {
      messageBox.textContent = resp.message;
      if (resp.status === "success") {
        messageBox.style.color = "green";
        registerForm.reset();
      } else {
        messageBox.style.color = "red";
      }
    })
    .catch(err => {
      messageBox.textContent = "Error connecting to server";
      messageBox.style.color = "red";
    });
  });
</script>

</body>
</html>
